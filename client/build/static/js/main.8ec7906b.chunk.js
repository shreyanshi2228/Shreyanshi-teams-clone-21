(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,c,t){},107:function(e,c,t){},155:function(e,c,t){},157:function(e,c,t){},158:function(e,c,t){},159:function(e,c,t){},160:function(e,c,t){},164:function(e,c){},166:function(e,c){},174:function(e,c,t){},175:function(e,c,t){},176:function(e,c,t){"use strict";t.r(c);var n=t(1),s=t.n(n),a=t(81),i=t.n(a),r=(t(91),t(26)),o=t(3),l=(t(92),t(6)),u=t(5),j=t(82),d=t.n(j),b=(t(105),t(0)),h=function(){return Object(b.jsx)("div",{className:"header",children:Object(b.jsxs)("div",{className:"logo",children:[Object(b.jsx)("img",{src:"https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31"}),Object(b.jsx)("span",{className:"help-text",children:"Teams"})]})})},m=(t(107),function(){var e=Object(o.f)();return Object(b.jsxs)("div",{className:"home-page",children:[Object(b.jsx)(h,{}),Object(b.jsx)("div",{className:"body",children:Object(b.jsx)("div",{className:"left-side",children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("h2",{children:"Microsoft Teams"}),Object(b.jsx)("p",{children:"Meet, chat, call, and collaborate in just one place."}),Object(b.jsx)("div",{className:"action-btn",children:Object(b.jsxs)("button",{className:"btn green",onClick:function(){var c=d.a.generate();e.push("/".concat(c,"#init"))},children:[Object(b.jsx)(l.a,{className:"icon-block",icon:u.i}),"Meet Now"]})})]})})})]})}),O=t(46),f=t(7),p=t.n(f),x=t(20),g=t(10),v=t(32),N=t.n(v),k=function(){var e=Object(x.a)(p.a.mark((function e(c){var t,n,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,N.a.post(c,t).then((function(e){return e.data})).catch((function(e){return{error:e.response.data}}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}(),w=function(){var e=Object(x.a)(p.a.mark((function e(c){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get(c).then((function(e){return e.data})).catch((function(e){return{error:e.response.data}}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}(),y="https://shreya-once.herokuapp.com",M=t(84),S=t.n(M),T=(t(155),t(85)),C=t.n(T),A=function(e){return C()(e).format("h:mm A")},I=function(e){var c=e.isMessenger,t=e.setIsMessenger,s=e.messageAlert,a=e.setMessageAlert,i=null,r=Object(n.useState)((function(){return A()})),o=Object(g.a)(r,2),j=o[0],d=o[1];return Object(n.useEffect)((function(){return i=setInterval((function(){return d(A())}),1e3),function(){clearInterval(i)}}),[]),Object(b.jsxs)("div",{className:"frame-header",children:[Object(b.jsxs)("div",{className:"header-items icon-block",onClick:function(){t(!0),a({})},children:[Object(b.jsx)(l.a,{className:"icon",icon:u.a}),!c&&s.alert&&Object(b.jsx)("span",{className:"alert-circle-icon"})]}),Object(b.jsx)("div",{className:"header-items date-block",children:j})]})},D=(t(157),function(e){var c=e.isPresenting,t=e.stopScreenShare,n=e.screenShare,s=e.isAudio,a=e.toggleAudio,i=e.disconnectCall;return Object(b.jsxs)("div",{className:"footer-item",children:[Object(b.jsx)("div",{className:"left-item"}),Object(b.jsxs)("div",{className:"center-item",children:[Object(b.jsx)("div",{className:"icon-block ".concat(s?null:"red-bg"),onClick:function(){return a(!s)},children:Object(b.jsx)(l.a,{className:"icon",icon:s?u.d:u.e})}),Object(b.jsx)("div",{className:"icon-block",onClick:i,children:Object(b.jsx)(l.a,{className:"icon red",icon:u.g})})]}),Object(b.jsx)("div",{className:"right-item",children:c?Object(b.jsxs)("div",{className:"icon-block",onClick:t,children:[Object(b.jsx)(l.a,{className:"icon red",icon:u.c}),Object(b.jsx)("p",{className:"title",children:"Stop presenting"})]}):Object(b.jsxs)("div",{className:"icon-block",onClick:n,children:[Object(b.jsx)(l.a,{className:"icon red",icon:u.c}),Object(b.jsx)("p",{className:"title",children:"Share your screen!"})]})})]})}),P=(t(158),function(e){var c=e.setMeetInfoPopup,t=e.url;return Object(b.jsxs)("div",{className:"meeting-info-block",children:[Object(b.jsxs)("div",{className:"meeting-header",children:[Object(b.jsx)("h3",{children:"Your meeting's Link!"}),Object(b.jsx)(l.a,{className:"icon",icon:u.h,onClick:function(){c(!1)}})]}),Object(b.jsxs)("div",{className:"meet-link",children:[Object(b.jsx)("span",{children:t}),Object(b.jsx)(l.a,{className:"icon",icon:u.b,onClick:function(){return navigator.clipboard.writeText(t)}})]})]})}),L=(t(159),function(e){var c=e.setIsMessenger,t=e.sendMsg,s=e.messageList,a=Object(n.useState)(""),i=Object(g.a)(a,2),r=i[0],o=i[1];return Object(b.jsxs)("div",{className:"messenger-container",children:[Object(b.jsxs)("div",{className:"messenger-header",children:[Object(b.jsx)("h3",{children:"Meeting chat"}),Object(b.jsx)(l.a,{className:"icon",icon:u.h,onClick:function(){c(!1)}})]}),Object(b.jsx)("div",{className:"chat-section",children:s.map((function(e){return Object(b.jsxs)("div",{className:"chat-block",children:[Object(b.jsxs)("div",{className:"sender",children:[e.user," ",Object(b.jsx)("small",{children:A(e.time)})]}),Object(b.jsx)("p",{className:"msg",children:e.msg})]},e.time)}))}),Object(b.jsxs)("div",{className:"send-msg-section",children:[Object(b.jsx)("input",{placeholder:"Type your message here!",value:r,onChange:function(e){return function(e){o(e.target.value)}(e)},onKeyDown:function(e){return function(e){"Enter"===e.key&&(t(r),o(""))}(e)}}),Object(b.jsx)(l.a,{className:"icon",icon:u.f,onClick:function(){t(r),o("")}})]})]})}),V=t(45),E=function(e,c){var t=Object(V.a)(e);switch(c.type){case"addMessage":return[].concat(Object(V.a)(t),[c.payload]);default:return e}},F=(t(160),function(e){var c=e.messageAlert;return Object(b.jsxs)("div",{className:"message-alert-popup",children:[Object(b.jsxs)("div",{className:"alert-header",children:[Object(b.jsx)(l.a,{className:"icon",icon:u.a}),Object(b.jsx)("h3",{children:c.payload.user})]}),Object(b.jsx)("p",{className:"alert-msg",children:c.payload.msg})]})}),R=t(86),U=t.n(R),B=(t(174),null),J=S.a.connect("https://shreya-once.herokuapp.com"),q=[],z=function(){var e=Object(o.f)(),c=Object(o.g)().id,t="#init"==window.location.hash,s="".concat(window.location.origin).concat(window.location.pathname),a=null,i=Object(n.useReducer)(E,q),r=Object(g.a)(i,2),l=r[0],u=r[1],j=Object(n.useState)(),d=Object(g.a)(j,2),h=d[0],m=d[1],f=Object(n.useState)(),v=Object(g.a)(f,2),N=v[0],M=v[1],S=Object(n.useState)(!1),T=Object(g.a)(S,2),C=T[0],A=T[1],V=Object(n.useState)(!1),R=Object(g.a)(V,2),z=R[0],K=R[1],Y=Object(n.useState)(!1),G=Object(g.a)(Y,2),H=G[0],Q=G[1],W=Object(n.useState)({}),X=Object(g.a)(W,2),Z=X[0],$=X[1],_=Object(n.useState)(!0),ee=Object(g.a)(_,2),ce=ee[0],te=ee[1];Object(n.useEffect)((function(){t&&A(!0),se(),J.on("code",(function(e){e.url===s&&B.signal(e.code)}))}),[]);var ne=function(){var e=Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("".concat(y).concat("/api/get-call-id","/").concat(c));case 2:(t=e.sent).code&&B.signal(t.code);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){m(e),B=new U.a({initiator:t,trickle:!1,stream:e}),t||ne(),B.on("signal",function(){var e=Object(x.a)(p.a.mark((function e(n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return a={id:c,signalData:n},e.next=4,k("".concat(y).concat("/api/save-call-id"),a);case 4:e.next=7;break;case 6:J.emit("code",{code:n,url:s},(function(e){console.log("code sent")}));case 7:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}()),B.on("connect",(function(){console.log("peer connected")})),B.on("data",(function(e){clearTimeout(a),u({type:"addMessage",payload:{user:"other",msg:e.toString(),time:Date.now()}}),$({alert:!0,isPopup:!0,payload:{user:"other",msg:e.toString()}}),a=setTimeout((function(){$(Object(O.a)(Object(O.a)({},Z),{},{isPopup:!1,payload:{}}))}),1e4)})),B.on("stream",(function(e){var c=document.querySelector("video");"srcObject"in c?c.srcObject=e:c.src=window.URL.createObjectURL(e),c.play()}))})).catch((function(){console.log("error")}))};return Object(b.jsxs)("div",{className:"callpage-container",children:[Object(b.jsx)("video",{className:"video-container",src:"",controls:!0}),Object(b.jsx)(I,{isMessenger:H,setIsMessenger:Q,messageAlert:Z,setMessageAlert:$}),Object(b.jsx)(D,{isPresenting:z,stopScreenShare:function(){N.getVideoTracks().forEach((function(e){e.stop()})),B.replaceTrack(N.getVideoTracks()[0],h.getVideoTracks()[0],h),K(!1)},screenShare:function(){navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){B.replaceTrack(h.getVideoTracks()[0],e.getVideoTracks()[0],h),M(e),e.getTracks()[0].onended=function(){B.replaceTrack(e.getVideoTracks()[0],h.getVideoTracks()[0],h)},K(!0)}))},isAudio:ce,toggleAudio:function(e){h.getAudioTracks()[0].enabled=e,te(e)},disconnectCall:function(){B.destroy(),e.push("/"),window.location.reload()}}),t&&C&&Object(b.jsx)(P,{setMeetInfoPopup:A,url:s}),H?Object(b.jsx)(L,{setIsMessenger:Q,sendMsg:function(e){B.send(e),u({type:"addMessage",payload:{user:"you",msg:e,time:Date.now()}})},messageList:l}):Z.isPopup&&Object(b.jsx)(F,{messageAlert:Z})]})},K=(t(175),function(){return Object(b.jsx)("div",{className:"no-match",children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("h2",{children:"Invalid video call link."}),Object(b.jsx)("div",{className:"action-btn",children:Object(b.jsx)(r.b,{className:"btn white",to:"/",children:"Click here to return to home screen!"})})]})})});var Y=function(){return Object(b.jsx)(r.a,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/:id",children:Object(b.jsx)(z,{})}),Object(b.jsx)(o.a,{exact:!0,path:"/",children:Object(b.jsx)(m,{})}),Object(b.jsx)(o.a,{path:"*",children:Object(b.jsx)(K,{})})]})})},G=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,177)).then((function(c){var t=c.getCLS,n=c.getFID,s=c.getFCP,a=c.getLCP,i=c.getTTFB;t(e),n(e),s(e),a(e),i(e)}))};i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(Y,{})}),document.getElementById("root")),G()},91:function(e,c,t){},92:function(e,c,t){}},[[176,1,2]]]);
//# sourceMappingURL=main.8ec7906b.chunk.js.map